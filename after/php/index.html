<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PHP问题总结 | 学习笔记</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/study-basefavicon.ico">
    <meta name="description" content="我的个人学习笔记">
    <link rel="preload" href="/study-base/assets/css/0.styles.08a7fdb3.css" as="style"><link rel="preload" href="/study-base/assets/js/app.c3530c40.js" as="script"><link rel="preload" href="/study-base/assets/js/2.b18ce7de.js" as="script"><link rel="preload" href="/study-base/assets/js/6.6b1e7b0f.js" as="script"><link rel="prefetch" href="/study-base/assets/js/10.ea8cc6af.js"><link rel="prefetch" href="/study-base/assets/js/11.8a52ab3a.js"><link rel="prefetch" href="/study-base/assets/js/12.fdeb7d9a.js"><link rel="prefetch" href="/study-base/assets/js/13.bebb4061.js"><link rel="prefetch" href="/study-base/assets/js/14.92b9de96.js"><link rel="prefetch" href="/study-base/assets/js/15.00364c12.js"><link rel="prefetch" href="/study-base/assets/js/16.d968f78b.js"><link rel="prefetch" href="/study-base/assets/js/17.f0f77404.js"><link rel="prefetch" href="/study-base/assets/js/18.5626c7b5.js"><link rel="prefetch" href="/study-base/assets/js/19.4e672c9d.js"><link rel="prefetch" href="/study-base/assets/js/20.7f66c62b.js"><link rel="prefetch" href="/study-base/assets/js/21.62d9e51f.js"><link rel="prefetch" href="/study-base/assets/js/22.e5af4f91.js"><link rel="prefetch" href="/study-base/assets/js/23.cd2da2e1.js"><link rel="prefetch" href="/study-base/assets/js/24.464e8778.js"><link rel="prefetch" href="/study-base/assets/js/25.ff934865.js"><link rel="prefetch" href="/study-base/assets/js/26.fc9f8f34.js"><link rel="prefetch" href="/study-base/assets/js/27.dc2e78dd.js"><link rel="prefetch" href="/study-base/assets/js/28.81329f84.js"><link rel="prefetch" href="/study-base/assets/js/29.6fe50f35.js"><link rel="prefetch" href="/study-base/assets/js/3.515afd3a.js"><link rel="prefetch" href="/study-base/assets/js/30.e7cb7af5.js"><link rel="prefetch" href="/study-base/assets/js/31.93494fb6.js"><link rel="prefetch" href="/study-base/assets/js/32.ba3dbc02.js"><link rel="prefetch" href="/study-base/assets/js/33.4893cc01.js"><link rel="prefetch" href="/study-base/assets/js/34.5cec16ab.js"><link rel="prefetch" href="/study-base/assets/js/35.18f4e89e.js"><link rel="prefetch" href="/study-base/assets/js/36.4a38792c.js"><link rel="prefetch" href="/study-base/assets/js/37.84f47308.js"><link rel="prefetch" href="/study-base/assets/js/38.45f7236b.js"><link rel="prefetch" href="/study-base/assets/js/39.15382fe0.js"><link rel="prefetch" href="/study-base/assets/js/4.8bed7a26.js"><link rel="prefetch" href="/study-base/assets/js/40.07acd6e9.js"><link rel="prefetch" href="/study-base/assets/js/41.22959966.js"><link rel="prefetch" href="/study-base/assets/js/42.42fcfb12.js"><link rel="prefetch" href="/study-base/assets/js/43.f7d50198.js"><link rel="prefetch" href="/study-base/assets/js/44.0cf67f2b.js"><link rel="prefetch" href="/study-base/assets/js/45.6a0ef3d0.js"><link rel="prefetch" href="/study-base/assets/js/46.53cd3d73.js"><link rel="prefetch" href="/study-base/assets/js/47.145417c8.js"><link rel="prefetch" href="/study-base/assets/js/48.c359e8a1.js"><link rel="prefetch" href="/study-base/assets/js/49.ccfd1221.js"><link rel="prefetch" href="/study-base/assets/js/5.40fe6f19.js"><link rel="prefetch" href="/study-base/assets/js/50.d33d09af.js"><link rel="prefetch" href="/study-base/assets/js/51.2df54482.js"><link rel="prefetch" href="/study-base/assets/js/52.9a1dbb93.js"><link rel="prefetch" href="/study-base/assets/js/53.fb3d8bf3.js"><link rel="prefetch" href="/study-base/assets/js/54.31def870.js"><link rel="prefetch" href="/study-base/assets/js/55.4e9500bc.js"><link rel="prefetch" href="/study-base/assets/js/56.c02bc3be.js"><link rel="prefetch" href="/study-base/assets/js/57.6784bbfc.js"><link rel="prefetch" href="/study-base/assets/js/58.c7d45b12.js"><link rel="prefetch" href="/study-base/assets/js/59.79b05b17.js"><link rel="prefetch" href="/study-base/assets/js/60.a16c7727.js"><link rel="prefetch" href="/study-base/assets/js/61.b42684ab.js"><link rel="prefetch" href="/study-base/assets/js/62.0d4a9d21.js"><link rel="prefetch" href="/study-base/assets/js/63.8db233c8.js"><link rel="prefetch" href="/study-base/assets/js/64.b32ebb9e.js"><link rel="prefetch" href="/study-base/assets/js/65.6ba92b20.js"><link rel="prefetch" href="/study-base/assets/js/66.e8d48f66.js"><link rel="prefetch" href="/study-base/assets/js/67.77990ab1.js"><link rel="prefetch" href="/study-base/assets/js/68.4e72b06b.js"><link rel="prefetch" href="/study-base/assets/js/69.e76eabec.js"><link rel="prefetch" href="/study-base/assets/js/7.40e57787.js"><link rel="prefetch" href="/study-base/assets/js/70.c38bfebf.js"><link rel="prefetch" href="/study-base/assets/js/71.d5945200.js"><link rel="prefetch" href="/study-base/assets/js/72.1de0acf4.js"><link rel="prefetch" href="/study-base/assets/js/73.418648e1.js"><link rel="prefetch" href="/study-base/assets/js/74.125f765e.js"><link rel="prefetch" href="/study-base/assets/js/75.ad00d077.js"><link rel="prefetch" href="/study-base/assets/js/76.cab32a67.js"><link rel="prefetch" href="/study-base/assets/js/77.a4d26daa.js"><link rel="prefetch" href="/study-base/assets/js/78.5c7e5e90.js"><link rel="prefetch" href="/study-base/assets/js/79.8193bea5.js"><link rel="prefetch" href="/study-base/assets/js/8.981723df.js"><link rel="prefetch" href="/study-base/assets/js/80.73106b4f.js"><link rel="prefetch" href="/study-base/assets/js/81.674396a5.js"><link rel="prefetch" href="/study-base/assets/js/82.f0d32fa9.js"><link rel="prefetch" href="/study-base/assets/js/83.69b57cf2.js"><link rel="prefetch" href="/study-base/assets/js/84.99ddbe05.js"><link rel="prefetch" href="/study-base/assets/js/85.49a73d30.js"><link rel="prefetch" href="/study-base/assets/js/86.d7b0b65d.js"><link rel="prefetch" href="/study-base/assets/js/87.f91f919e.js"><link rel="prefetch" href="/study-base/assets/js/88.99572bbd.js"><link rel="prefetch" href="/study-base/assets/js/9.f5b18ab0.js">
    <link rel="stylesheet" href="/study-base/assets/css/0.styles.08a7fdb3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/study-base/" class="home-link router-link-active"><!----> <span class="site-name">学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/study-base/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="杂项" class="dropdown-title"><span class="title">杂项</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-base/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/study-base/mac/" class="nav-link">
  macbook
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习" class="dropdown-title"><span class="title">前端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础知识
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study-base/front/basics/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-subitem"><a href="/study-base/front/basics/js/" class="nav-link">
  JS
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/study-base/front/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/study-base/front/typeScript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/study-base/front/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/study-base/front/uniApp/" class="nav-link">
  uni-app
</a></li><li class="dropdown-item"><!----> <a href="/study-base/front/react/" class="nav-link">
  react
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端学习" class="dropdown-title"><span class="title">后端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-base/after/c/" class="nav-link">
  C语言
</a></li><li class="dropdown-item"><!----> <a href="/study-base/after/php/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/study-base/after/node/" class="nav-link">
  NodeJs
</a></li><li class="dropdown-item"><!----> <a href="/study-base/after/python/" class="nav-link">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/study-base/after/leetcode/" class="nav-link">
  算法题目
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-base/sql/mysql/" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/study-base/sql/orcale/" class="nav-link">
  Oracle
</a></li><li class="dropdown-item"><h4>
          nosql
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study-base/sql/nosql/redis/" class="nav-link">
  redis
</a></li><li class="dropdown-subitem"><a href="/study-base/sql/nosql/mongodb/" class="nav-link">
  mongoDB
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://www.28yanyu.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  技术小窝
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/study-base/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="杂项" class="dropdown-title"><span class="title">杂项</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-base/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/study-base/mac/" class="nav-link">
  macbook
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习" class="dropdown-title"><span class="title">前端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础知识
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study-base/front/basics/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-subitem"><a href="/study-base/front/basics/js/" class="nav-link">
  JS
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/study-base/front/webpack/" class="nav-link">
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/study-base/front/typeScript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/study-base/front/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-item"><!----> <a href="/study-base/front/uniApp/" class="nav-link">
  uni-app
</a></li><li class="dropdown-item"><!----> <a href="/study-base/front/react/" class="nav-link">
  react
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端学习" class="dropdown-title"><span class="title">后端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-base/after/c/" class="nav-link">
  C语言
</a></li><li class="dropdown-item"><!----> <a href="/study-base/after/php/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/study-base/after/node/" class="nav-link">
  NodeJs
</a></li><li class="dropdown-item"><!----> <a href="/study-base/after/python/" class="nav-link">
  Python
</a></li><li class="dropdown-item"><!----> <a href="/study-base/after/leetcode/" class="nav-link">
  算法题目
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study-base/sql/mysql/" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/study-base/sql/orcale/" class="nav-link">
  Oracle
</a></li><li class="dropdown-item"><h4>
          nosql
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/study-base/sql/nosql/redis/" class="nav-link">
  redis
</a></li><li class="dropdown-subitem"><a href="/study-base/sql/nosql/mongodb/" class="nav-link">
  mongoDB
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://www.28yanyu.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  技术小窝
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/study-base/after/php/" aria-current="page" class="active sidebar-link">PHP问题总结</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study-base/after/php/#thinkphp中的模型关联" class="sidebar-link">thinkPHP中的模型关联</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study-base/after/php/#模型中的一对一关联" class="sidebar-link">模型中的一对一关联</a></li><li class="sidebar-sub-header"><a href="/study-base/after/php/#相对关联1对1" class="sidebar-link">相对关联1对1</a></li><li class="sidebar-sub-header"><a href="/study-base/after/php/#解决n-1次查询问题" class="sidebar-link">解决N+1次查询问题</a></li><li class="sidebar-sub-header"><a href="/study-base/after/php/#关联保存" class="sidebar-link">关联保存</a></li><li class="sidebar-sub-header"><a href="/study-base/after/php/#定义别名" class="sidebar-link">定义别名</a></li><li class="sidebar-sub-header"><a href="/study-base/after/php/#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/study-base/after/php/#一对多关联" class="sidebar-link">一对多关联</a></li><li class="sidebar-sub-header"><a href="/study-base/after/php/#多对多关联" class="sidebar-link">多对多关联</a></li><li class="sidebar-sub-header"><a href="/study-base/after/php/#模型关联闭包中的操作" class="sidebar-link">模型关联闭包中的操作</a></li></ul></li><li class="sidebar-sub-header"><a href="/study-base/after/php/#thinkphp伪静态配置" class="sidebar-link">thinkPHP伪静态配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study-base/after/php/#apache" class="sidebar-link">Apache</a></li><li class="sidebar-sub-header"><a href="/study-base/after/php/#nginx" class="sidebar-link">Nginx</a></li><li class="sidebar-sub-header"><a href="/study-base/after/php/#iis-不推荐" class="sidebar-link">IIS(不推荐)</a></li></ul></li><li class="sidebar-sub-header"><a href="/study-base/after/php/#php中yield的用法" class="sidebar-link">php中yield的用法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study-base/after/php/#解决的问题" class="sidebar-link">解决的问题</a></li><li class="sidebar-sub-header"><a href="/study-base/after/php/#对比" class="sidebar-link">对比</a></li></ul></li><li class="sidebar-sub-header"><a href="/study-base/after/php/#composer忽略扩展检查" class="sidebar-link">composer忽略扩展检查</a></li></ul></li><li><a href="/study-base/after/php/php扩展.html" class="sidebar-link">php安装扩展</a></li><li><a href="/study-base/after/php/PHPspreadsheet专项.html" class="sidebar-link">PhpSpreadsheet专项</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="php问题总结"><a href="#php问题总结" class="header-anchor">#</a> PHP问题总结</h1> <h2 id="thinkphp中的模型关联"><a href="#thinkphp中的模型关联" class="header-anchor">#</a> thinkPHP中的模型关联</h2> <p><strong>模型关联知识梳理：</strong></p> <ul><li>意义：通过模型关联把数据表的关联关系对象化，解决了大部分的常用的关联场景，比操作常规的数据库更加智能和高效、直观。</li></ul> <blockquote><p>避免了在模型内部使用复杂的<code>join</code>查询和视图查询。</p></blockquote> <h3 id="模型中的一对一关联"><a href="#模型中的一对一关联" class="header-anchor">#</a> 模型中的一对一关联</h3> <ul><li>定义一个关联模型如<code>User</code></li> <li><code>hasOne</code>方法的参数包括：</li></ul> <blockquote><p><code>hasOne('关联模型类名','外键','主键');</code></p> <ul><li><p>关联模型（必须）：关联模型的类名</p></li> <li><p>外键：默认是关联模型的类名小写+<code>_id</code>，如<code>user_id</code></p></li> <li><p>主键：当前模型的主键，默认自动获取也可以指定传入</p></li></ul></blockquote> <ul><li>外键和主键并不一定是真实的外键和主键，但是要保证其的关联关系，用索引来代替外键，提高查询的效率。</li></ul> <div class="language-PHP extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
    <span class="token keyword">namespace</span> <span class="token package">app<span class="token punctuation">\</span>model</span><span class="token punctuation">;</span>
	<span class="token keyword">use</span> <span class="token package">think<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>
	<span class="token keyword">class</span> <span class="token class-name">User</span> extend Model<span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">userinfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasOne</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Userinfo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></code></pre></div><ul><li>定义一个被关联的空模型<code>Userinfo</code></li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
    <span class="token keyword">namespace</span> <span class="token package">app<span class="token punctuation">\</span>model</span><span class="token punctuation">;</span>
	<span class="token keyword">use</span> <span class="token package">think<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>
	<span class="token keyword">class</span> <span class="token class-name">Userinfo</span> extend Model<span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span>
</span></code></pre></div><ul><li>使用方法</li></ul> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
	<span class="token keyword">namespace</span> <span class="token package">app<span class="token punctuation">\</span>controller<span class="token punctuation">\</span>Index</span><span class="token punctuation">;</span>
	<span class="token keyword">use</span> <span class="token package">app<span class="token punctuation">\</span>model<span class="token punctuation">\</span>User</span><span class="token punctuation">;</span>
	<span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">index</span><span class="token punctuation">(</span>User <span class="token variable">$user</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token variable">$user1</span> <span class="token operator">=</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">echo</span> <span class="token variable">$user1</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">userinfo</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">nickname</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

</span></code></pre></div><h3 id="相对关联1对1"><a href="#相对关联1对1" class="header-anchor">#</a> 相对关联1对1</h3> <blockquote><p>相对关联类似于附表关联主表的操作</p> <p><code>belongsTo('关联模型','外键','关联主键');</code></p> <ul><li>关联模型(必须)：关联模型的类名</li> <li>外键：当前模型外键，默认的外键名贵族是关联模型名+<code>_id</code></li> <li>关联主键：关联模型主键，一般可以自动获取对应主键，也可以自己传入。</li></ul></blockquote> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
    <span class="token keyword">namespace</span> <span class="token package">app<span class="token punctuation">\</span>model</span><span class="token punctuation">;</span>
	<span class="token keyword">use</span> <span class="token package">think<span class="token punctuation">\</span>Model</span><span class="token punctuation">;</span>
	<span class="token keyword">class</span> <span class="token class-name">Userinfo</span> extend Model<span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">belongsTo</span><span class="token punctuation">(</span>User<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</span></code></pre></div><p><strong>在定义关联查询的时候不能使用以下的几种方式进行关联操作</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasOne</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Userinfo'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">order</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'create_time'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasOne</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Userinfo'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasOne</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Userinfo'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasOne</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Userinfo'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>以上仅为列举的一类还有其他一些较为重要的复合函数均不能使用</p></blockquote> <h3 id="解决n-1次查询问题"><a href="#解决n-1次查询问题" class="header-anchor">#</a> 解决<code>N+1</code>次查询问题</h3> <blockquote><p>使用与载入查询的方法可以解决典型的<code>N+1</code>次查询问题，使用：</p></blockquote> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$users</span> <span class="token operator">=</span> User<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'userinfo'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token variable">$users</span> <span class="token keyword">as</span> <span class="token variable">$user</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">profile</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">name</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>以上代码使用的是<code>IN</code>查询，只会产生2条<code>SQL</code>查询语句。</p></blockquote> <ul><li>如果要对关联模型进行约束，可以采用闭包的方式。</li> <li><code>with</code>方法可以传入数组或同事关联多个模型（支持不同的关联类型）进行与载入查询。</li> <li>如果需要使用<code>JOIN</code>方式查询，直接可以使用<code>withJoin</code>方法，这样只会生成一条语句。默认连接方式是<code>INNER JOIN</code>。</li></ul> <h3 id="关联保存"><a href="#关联保存" class="header-anchor">#</a> 关联保存</h3> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> User<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">userinfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'nickname'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token single-quoted-string string">'测试'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="定义别名"><a href="#定义别名" class="header-anchor">#</a> 定义别名</h3> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">userinfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasOne</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Profile'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'user_id'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'email'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'name'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token single-quoted-string string">'nickname'</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h3> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$user</span> <span class="token operator">=</span> User<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'profile'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 直接输出关联模型的绑定属性</span>
<span class="token keyword">echo</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">email</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">name</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">注意点：</p> <p><code>with</code>方法只能调用一次，不能多次调用</p></div> <h3 id="一对多关联"><a href="#一对多关联" class="header-anchor">#</a> 一对多关联</h3> <blockquote><p><code>hasMany('关联模型','外键','主键')</code>;</p> <p>操作基本同上</p></blockquote> <h3 id="多对多关联"><a href="#多对多关联" class="header-anchor">#</a> 多对多关联</h3> <blockquote><p>需要建立一个中间表进行关联操作</p> <p><code>belongsToMany('关联模型','中间表','外键','关联键')</code>；</p> <ul><li>关联模型（必须）：关联模型类名</li> <li>中间表：默认规则是当前模型名+<code>_</code>+关联模型名（可以自己指定模型名）</li> <li>外键：中间表的模型外键，默认是关联模型名称+<code>_id</code></li> <li>关联键：中间表的当前模型关联键名，默认规则是当前模型+<code>_id</code></li></ul></blockquote> <h3 id="模型关联闭包中的操作"><a href="#模型关联闭包中的操作" class="header-anchor">#</a> 模型关联闭包中的操作</h3> <blockquote><p>在使用闭包查询的时候，如果需要对关联表做查询或者限制表字段的操作，需要通过下面的方式</p></blockquote> <div class="language-php extra-class"><pre class="language-php"><code>
 <span class="token variable">$query</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">field</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;表名.表字段&quot;</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;表名.表字段&quot;</span><span class="token punctuation">,</span><span class="token double-quoted-string string">&quot;值&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
</code></pre></div><h2 id="thinkphp伪静态配置"><a href="#thinkphp伪静态配置" class="header-anchor">#</a> thinkPHP伪静态配置</h2> <h3 id="apache"><a href="#apache" class="header-anchor">#</a> Apache</h3> <ol><li><code>httpd.conf</code>配置文件中加载了<code>mod_rewrite.so</code>模块</li> <li><code>AllowOverride None</code>将<code>None</code>改为<code>All</code></li> <li>把下面的内容保存为<code>.htaccess</code>文件放到应用入口文件的同级目录下</li></ol> <div class="language- extra-class"><pre class="language-text"><code>&lt;IfModule mod_rewrite.c&gt;
  Options +FollowSymlinks -Multiviews
  RewriteEngine On

  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule ^(.*)$ index.php/$1 [QSA,PT,L]
&lt;/IfModule&gt;
</code></pre></div><p><strong>若不生效则使用以下的方法：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>// 将
RewriteRule ^(.*)$ index.php/$1 [QSA,PT,L]
// 改为
RewriteRule ^(.*)$ index.php?/$1[QSA,PT,L]
</code></pre></div><h3 id="nginx"><a href="#nginx" class="header-anchor">#</a> Nginx</h3> <p>在<code>Nginx</code>低版本中，不支持<code>PATHINFO</code>的，但是可以通过在<code>Nginx.conf</code>中配置转发规则实现：</p> <div class="language- extra-class"><pre class="language-text"><code>location / { // …..省略部分代码
   if (!-e $request_filename) {
   		rewrite  ^(.*)$  /index.php?s=/$1  last;
    }
}
</code></pre></div><p><em><strong>若应用配置在二级目录中需要设置对应的<code>Nginx</code>的伪静态方法</strong></em></p> <blockquote><p>例如当前有一个项目的目录名称为<code>myproject</code>的二级目录</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>location /`myproject`/ {
    if (!-e $request_filename){
        rewrite  ^/`myproject`/(.*)$  /`myproject`/index.php?s=/$1  last;
    }
}
</code></pre></div><h3 id="iis-不推荐"><a href="#iis-不推荐" class="header-anchor">#</a> IIS(不推荐)</h3> <p>如果你的服务器环境支持<code>ISAPI_Rewrite</code>的话，可以配置<code>httpd.ini</code>文件，添加下面的内容：</p> <div class="language- extra-class"><pre class="language-text"><code>RewriteRule (.*)$ /index\.php\?s=$1 [I]
</code></pre></div><p>在IIS的高版本下面可以配置<code>web.Config</code>，在中间添加<code>rewrite</code>节点：</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;rewrite&gt;
 &lt;rules&gt;
 &lt;rule name=&quot;OrgPage&quot; stopProcessing=&quot;true&quot;&gt;
 &lt;match url=&quot;^(.*)$&quot; /&gt;
 &lt;conditions logicalGrouping=&quot;MatchAll&quot;&gt;
 &lt;add input=&quot;{HTTP_HOST}&quot; pattern=&quot;^(.*)$&quot; /&gt;
 &lt;add input=&quot;{REQUEST_FILENAME}&quot; matchType=&quot;IsFile&quot; negate=&quot;true&quot; /&gt;
 &lt;add input=&quot;{REQUEST_FILENAME}&quot; matchType=&quot;IsDirectory&quot; negate=&quot;true&quot; /&gt;
 &lt;/conditions&gt;
 &lt;action type=&quot;Rewrite&quot; url=&quot;index.php/{R:1}&quot; /&gt;
 &lt;/rule&gt;
 &lt;/rules&gt;
 &lt;/rewrite&gt;
</code></pre></div><h2 id="php中yield的用法"><a href="#php中yield的用法" class="header-anchor">#</a> <code>php</code>中<code>yield</code>的用法</h2> <h3 id="解决的问题"><a href="#解决的问题" class="header-anchor">#</a> 解决的问题</h3> <blockquote><p>解决运行内存的瓶颈，<code>php</code>程序中的变量存储在内存中，大批量的数据写入内存后会导致内存不足出现错误<code>Fatal Error: Allowed memory size of xxxxxx bytes</code></p> <p>所以一般通过设置<code>php</code>最大运行内存<code>ini_set('memory_limit','300M')</code></p> <p>但是当我们读取几个G大的文件的时候，我们运行内存可能就吃不消了，所以我们一般会选择使用<code>yield</code></p></blockquote> <h3 id="对比"><a href="#对比" class="header-anchor">#</a> 对比</h3> <h4 id="非采用yield"><a href="#非采用yield" class="header-anchor">#</a> 非采用yield</h4> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">function</span> <span class="token function">createArr</span><span class="token punctuation">(</span><span class="token variable">$num</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token variable">$data</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token variable">$i</span><span class="token operator">&lt;</span><span class="token variable">$num</span><span class="token punctuation">;</span><span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token variable">$data</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token variable">$data</span> <span class="token operator">=</span> <span class="token function">createArr</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token variable">$data</span> <span class="token keyword">as</span> <span class="token variable">$val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">echo</span> <span class="token variable">$val</span><span class="token punctuation">.</span><span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
	<span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>运行后：</p> <p><a data-fancybox="" title="image-20200702205402889" href="./image-20200702205402889.png"><img src="data:image/png;base64,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+qRPrTjf6keA/ulTAyCGBxoDEEOoARBDqAEQQ6gBEEOfWmG+PjWAMehTK84XYAD906d2wXwAjqFPDYAY+tQa5m/dNwDOoU+tOF+fGkD/9KkV5utTAxiDPrXifAD6p0+twEpIgDHoU9sw361HgD7pUyvOt/oRoH/61ACI4YHGAMQQagDEEGoAxBBqAMQQagDEEGoAxBBqAMQQagDEEGoAxBBqAMQQagDEEGoAxBBqAMQQagDEEGoAxBBqAMQQagDEEGoAxBBqAMTYJdQej8ceY4bdPgB9+Pr+/v7z+sP7/d486PF4bHrfXq7e/pKe9w0gyX/Pk+39fv/7z5lXPo/HI/5K6+xjCvBTzd5+PPMkfOYVzNGfaWm+YAM4XtN3aktXVVeftK/efsUI+wgwst9Hb+B5Ep+e0N9dnU1P+M/XtLx/bR9e5717TeXP5/Zxaf70Pb5jAzhGU6htORE/T+LTE/ncSf31Z8//rr6/st/v3re2P+/+vDp/bn8EG8D+dv09taXba9MT+Nzr1k7wa+9f2/7ePgkkgQZwjMNvP46idZHH1lASaADH2T3Urr61tnX7LVeKv35tCyeBBnCs2duPS989bb2997qY4tPFHp+Gw9rnmFv88cl8gQZwvN/Pk+/cwoc9vVu9ON3+62rC6c8+Wf24tg+V24uV249Ln1GgARzv63a7/fOYrD18slpxadaR7wFgbIc/pX/uSvDM9wPwcxx2pQYAZ9OnBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQAyhBkAMoQZADKEGQIz/AbXwbtZD1L1bAAAAAElFTkSuQmCC" alt="image-20200702205402889"></a></p> <blockquote><p>可以看到时间戳都是相同的</p></blockquote> <h4 id="采用yield"><a href="#采用yield" class="header-anchor">#</a> 采用yield</h4> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">function</span> <span class="token function">createArr</span><span class="token punctuation">(</span><span class="token variable">$num</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token variable">$i</span><span class="token operator">&lt;</span><span class="token variable">$num</span><span class="token punctuation">;</span><span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">yield</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token variable">$data</span> <span class="token operator">=</span> <span class="token function">createArr</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token variable">$data</span> <span class="token keyword">as</span> <span class="token variable">$val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">echo</span> <span class="token variable">$val</span><span class="token punctuation">.</span><span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
	<span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p><a data-fancybox="" title="使用Yield" href="./image-20200702205542213.png"><img src="data:image/png;base64,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" alt="使用Yield"></a></p> <blockquote><p>可以看到每次输出的时间都相隔1秒，通过这个例子我们可以知道，不是像不采用yield方式把for循环中的内容存在内存中，而是一个个的消耗。</p></blockquote> <p><a href="https://segmentfault.com/a/1190000012334856" title="PHP性能优化" target="_blank" rel="noopener noreferrer">PHP性能优化<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="composer忽略扩展检查"><a href="#composer忽略扩展检查" class="header-anchor">#</a> composer忽略扩展检查</h2> <div class="language-shell script extra-class"><pre class="language-shell"><code>composer --ignore-platform-reqs require  扩展名称
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/25/2020, 10:36:04 AM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/study-base/after/php/php扩展.html">
        php安装扩展
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/study-base/assets/js/app.c3530c40.js" defer></script><script src="/study-base/assets/js/2.b18ce7de.js" defer></script><script src="/study-base/assets/js/6.6b1e7b0f.js" defer></script>
  </body>
</html>
